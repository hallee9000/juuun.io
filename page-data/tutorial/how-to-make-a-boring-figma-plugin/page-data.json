{"componentChunkName":"component---src-templates-post-js","path":"/tutorial/how-to-make-a-boring-figma-plugin/","result":{"data":{"markdownRemark":{"id":"66946d9e-1354-5bb5-815c-073eb4d484ad","excerpt":"有一天我看到 Figma 的新首页时，突然产生一个想法——这个带有自己名字的鼠标指针看起来挺酷的，我能不能做一个 Figma…","html":"<p>有一天我看到 <a href=\"https://www.figma.com/\" target=\"_blank\" rel=\"noopener noreferrer\">Figma</a> 的新首页时，突然产生一个想法——这个带有自己名字的鼠标指针看起来挺酷的，我能不能做一个 Figma 插件来生成这种光标呢？</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"https://cdn.jsdelivr.net/gh/leadream/juuun.io@gh-pages/static/a46a49063e93231528f30f2eca39d74b/de062/figma-home.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 53.125%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAIFBP/EABUBAQEAAAAAAAAAAAAAAAAAAAAB/9oADAMBAAIQAxAAAAG0mNUqCi//xAAZEAACAwEAAAAAAAAAAAAAAAABAgADEhH/2gAIAQEAAQUCfQgL9yJZY2ha8rPU/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAGRAAAgMBAAAAAAAAAAAAAAAAAAERITEi/9oACAEBAAY/AuTFBg1NGibP/8QAHBABAAIBBQAAAAAAAAAAAAAAAQARITFBYXGh/9oACAEBAAE/IVRQ5uI8CZFpmH35ohLgFToiOLZ//9oADAMBAAIAAwAAABBvD//EABURAQEAAAAAAAAAAAAAAAAAABAR/9oACAEDAQE/EKf/xAAVEQEBAAAAAAAAAAAAAAAAAAAQEf/aAAgBAgEBPxCH/8QAHhABAQACAAcAAAAAAAAAAAAAAREAITFBUWFxgaH/2gAIAQEAAT8QOUBtRPG0wfssqjZ1N5zQKrOLhSKEUiXuYMYGgCD5l4Ba+3P/2Q=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Figma 新首页\"\n        title=\"Figma 新首页\"\n        src=\"https://cdn.jsdelivr.net/gh/leadream/juuun.io@gh-pages/static/a46a49063e93231528f30f2eca39d74b/c08c5/figma-home.jpg\"\n        srcset=\"https://cdn.jsdelivr.net/gh/leadream/juuun.io@gh-pages/static/a46a49063e93231528f30f2eca39d74b/0913d/figma-home.jpg 160w,\nhttps://cdn.jsdelivr.net/gh/leadream/juuun.io@gh-pages/static/a46a49063e93231528f30f2eca39d74b/cb69c/figma-home.jpg 320w,\nhttps://cdn.jsdelivr.net/gh/leadream/juuun.io@gh-pages/static/a46a49063e93231528f30f2eca39d74b/c08c5/figma-home.jpg 640w,\nhttps://cdn.jsdelivr.net/gh/leadream/juuun.io@gh-pages/static/a46a49063e93231528f30f2eca39d74b/6a068/figma-home.jpg 960w,\nhttps://cdn.jsdelivr.net/gh/leadream/juuun.io@gh-pages/static/a46a49063e93231528f30f2eca39d74b/eea4a/figma-home.jpg 1280w,\nhttps://cdn.jsdelivr.net/gh/leadream/juuun.io@gh-pages/static/a46a49063e93231528f30f2eca39d74b/de062/figma-home.jpg 2878w\"\n        sizes=\"(max-width: 640px) 100vw, 640px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>我马上打开电脑，开始研究了起来。差不多花了一个多小时，我就把<a href=\"https://github.com/leadream/figma-plugin-cursor-creator\" target=\"_blank\" rel=\"noopener noreferrer\">这个插件</a>写了出来，它的效果就像下面这样。</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/leadream/juuun.io@gh-pages/5ed381f0347b1f98f25c21292a98ef5d/final-effect.gif\" alt=\"插件效果\"></p>\n<p>现在我想要把这个过程分享出来，如果你也想写一个 Figma 插件说不定会有帮助。这个过程其实很简单，只需要三步：创建插件，编写插件，运行插件，就像把大象装进冰箱一样简单。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"https://cdn.jsdelivr.net/gh/leadream/juuun.io@gh-pages/static/4950172213b912d9331d48e86fccc136/29d31/elephant.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 27.500000000000004%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAGABQDASIAAhEBAxEB/8QAFQABAQAAAAAAAAAAAAAAAAAAAAH/xAAVAQEBAAAAAAAAAAAAAAAAAAAABP/aAAwDAQACEAMQAAABgsiA/8QAFBABAAAAAAAAAAAAAAAAAAAAEP/aAAgBAQABBQJ//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAFBABAAAAAAAAAAAAAAAAAAAAEP/aAAgBAQAGPwJ//8QAFhABAQEAAAAAAAAAAAAAAAAAAAER/9oACAEBAAE/IdjVf//aAAwDAQACAAMAAAAQ9D//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/ED//xAAVEQEBAAAAAAAAAAAAAAAAAAAQEf/aAAgBAgEBPxCH/8QAFxABAQEBAAAAAAAAAAAAAAAAAQARIf/aAAgBAQABPxBwQJCAGSF4Zf/Z'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"把大象装进冰箱\"\n        title=\"把大象装进冰箱\"\n        src=\"https://cdn.jsdelivr.net/gh/leadream/juuun.io@gh-pages/static/4950172213b912d9331d48e86fccc136/c08c5/elephant.jpg\"\n        srcset=\"https://cdn.jsdelivr.net/gh/leadream/juuun.io@gh-pages/static/4950172213b912d9331d48e86fccc136/0913d/elephant.jpg 160w,\nhttps://cdn.jsdelivr.net/gh/leadream/juuun.io@gh-pages/static/4950172213b912d9331d48e86fccc136/cb69c/elephant.jpg 320w,\nhttps://cdn.jsdelivr.net/gh/leadream/juuun.io@gh-pages/static/4950172213b912d9331d48e86fccc136/c08c5/elephant.jpg 640w,\nhttps://cdn.jsdelivr.net/gh/leadream/juuun.io@gh-pages/static/4950172213b912d9331d48e86fccc136/29d31/elephant.jpg 700w\"\n        sizes=\"(max-width: 640px) 100vw, 640px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<h2>创建插件</h2>\n<p>在创建插件之前，我们需要先安装一点东西。首先我们需要安装 <a href=\"https://code.visualstudio.com/\" target=\"_blank\" rel=\"noopener noreferrer\">VSCode</a>，不然我们用啥写代码？其次，我们需要安装 <a href=\"https://nodejs.org/zh-cn/\" target=\"_blank\" rel=\"noopener noreferrer\">Node.js</a>，它可以帮我们将我们写的代码转换为 Figma 可读的插件代码。这两个东西你可以根据官网说明安装，此处不表。</p>\n<p>接下来，我们还需要安装一个叫做 typescript 的东西，不过是要通过命令行安装，它的作用是帮助我们转换代码。打开你的终端（就是那个黑乎乎的东西，见下图），复制下面这行代码进去，按下回车，输入你的密码（输入时看不到变化），再次回车，过一会就安装好了。</p>\n<pre><code class=\"language-sh\">sudo npm install -g typescript \n</code></pre>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"https://cdn.jsdelivr.net/gh/leadream/juuun.io@gh-pages/static/d6051d8a0ec1358e2fab488abeec85f2/60bbd/typescript.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 73.125%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAPABQDASIAAhEBAxEB/8QAGQAAAgMBAAAAAAAAAAAAAAAAAAUBAgME/8QAFgEBAQEAAAAAAAAAAAAAAAAAAgAB/9oADAMBAAIQAxAAAAFrpyzYmLgf/8QAGxAAAwACAwAAAAAAAAAAAAAAAQIDAAQREhP/2gAIAQEAAQUCmvafkhy44ulCqnYIFFL0/8QAFhEBAQEAAAAAAAAAAAAAAAAAAAES/9oACAEDAQE/AWa//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAGhAAAgMBAQAAAAAAAAAAAAAAAAECEVESIf/aAAgBAQAGPwJNnqsmloo0XyOWn//EABkQAQEBAQEBAAAAAAAAAAAAAAERADFRcf/aAAgBAQABPyEkzXPA/WAhA409WHbmHrO6Gwuy7//aAAwDAQACAAMAAAAQMC//xAAXEQEBAQEAAAAAAAAAAAAAAAABABEx/9oACAEDAQE/EBOQ5oX/xAAVEQEBAAAAAAAAAAAAAAAAAAABAP/aAAgBAgEBPxBlL//EAB0QAQEAAgMAAwAAAAAAAAAAAAERACExUWFBcZH/2gAIAQEAAT8QfwCv7kxZOEjMKBMAQNGfE3lS7+smyhpZrZ1xnsMgmp15n//Z'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"安装 typescript\"\n        title=\"安装 typescript\"\n        src=\"https://cdn.jsdelivr.net/gh/leadream/juuun.io@gh-pages/static/d6051d8a0ec1358e2fab488abeec85f2/c08c5/typescript.jpg\"\n        srcset=\"https://cdn.jsdelivr.net/gh/leadream/juuun.io@gh-pages/static/d6051d8a0ec1358e2fab488abeec85f2/0913d/typescript.jpg 160w,\nhttps://cdn.jsdelivr.net/gh/leadream/juuun.io@gh-pages/static/d6051d8a0ec1358e2fab488abeec85f2/cb69c/typescript.jpg 320w,\nhttps://cdn.jsdelivr.net/gh/leadream/juuun.io@gh-pages/static/d6051d8a0ec1358e2fab488abeec85f2/c08c5/typescript.jpg 640w,\nhttps://cdn.jsdelivr.net/gh/leadream/juuun.io@gh-pages/static/d6051d8a0ec1358e2fab488abeec85f2/6a068/typescript.jpg 960w,\nhttps://cdn.jsdelivr.net/gh/leadream/juuun.io@gh-pages/static/d6051d8a0ec1358e2fab488abeec85f2/eea4a/typescript.jpg 1280w,\nhttps://cdn.jsdelivr.net/gh/leadream/juuun.io@gh-pages/static/d6051d8a0ec1358e2fab488abeec85f2/60bbd/typescript.jpg 1344w\"\n        sizes=\"(max-width: 640px) 100vw, 640px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>噢，别忘记了最重要的一项，安装 Figma 客户端，我们后续的插件测试都是在客户端中进行。好了，现在准备工作做好了，我们开始创建一个插件。</p>\n<p>进入插件页面，点击右侧的 Development 右边的加号，就进入了创建插件的流程。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"https://cdn.jsdelivr.net/gh/leadream/juuun.io@gh-pages/static/7800408066c6668d6c90f84e24ed7f6b/eec88/create-plugin.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 62.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAEDBf/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAdpWCQw//8QAGRAAAgMBAAAAAAAAAAAAAAAAAAIBEBMR/9oACAEBAAEFAs0M0M0uZ4f/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAYEAADAQEAAAAAAAAAAAAAAAABMpEAIP/aAAgBAQAGPwJBMgmQTj//xAAZEAABBQAAAAAAAAAAAAAAAAAAARARMfH/2gAIAQEAAT8hJZoSN1TP/9oADAMBAAIAAwAAABBwD//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8QP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8QP//EABwQAQACAQUAAAAAAAAAAAAAAAEAESEQUWGBsf/aAAgBAQABPxDKZeaQQL74MPm0SyWii43qf//Z'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"创建插件\"\n        title=\"创建插件\"\n        src=\"https://cdn.jsdelivr.net/gh/leadream/juuun.io@gh-pages/static/7800408066c6668d6c90f84e24ed7f6b/c08c5/create-plugin.jpg\"\n        srcset=\"https://cdn.jsdelivr.net/gh/leadream/juuun.io@gh-pages/static/7800408066c6668d6c90f84e24ed7f6b/0913d/create-plugin.jpg 160w,\nhttps://cdn.jsdelivr.net/gh/leadream/juuun.io@gh-pages/static/7800408066c6668d6c90f84e24ed7f6b/cb69c/create-plugin.jpg 320w,\nhttps://cdn.jsdelivr.net/gh/leadream/juuun.io@gh-pages/static/7800408066c6668d6c90f84e24ed7f6b/c08c5/create-plugin.jpg 640w,\nhttps://cdn.jsdelivr.net/gh/leadream/juuun.io@gh-pages/static/7800408066c6668d6c90f84e24ed7f6b/6a068/create-plugin.jpg 960w,\nhttps://cdn.jsdelivr.net/gh/leadream/juuun.io@gh-pages/static/7800408066c6668d6c90f84e24ed7f6b/eea4a/create-plugin.jpg 1280w,\nhttps://cdn.jsdelivr.net/gh/leadream/juuun.io@gh-pages/static/7800408066c6668d6c90f84e24ed7f6b/eec88/create-plugin.jpg 2880w\"\n        sizes=\"(max-width: 640px) 100vw, 640px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>先填写一个插件名字，点击继续。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"https://cdn.jsdelivr.net/gh/leadream/juuun.io@gh-pages/static/9a4357d8cc125fa222e7809987f3307d/8e12e/plugin-name.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 67.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAOABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAABQADBv/EABUBAQEAAAAAAAAAAAAAAAAAAAAB/9oADAMBAAIQAxAAAAF0J/l0LtJf/8QAGhAAAgMBAQAAAAAAAAAAAAAAAgMAAQQFEf/aAAgBAQABBQKaVCxxCQ3OhfmtrSaX/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAGxABAAICAwAAAAAAAAAAAAAAAQACERIQUXH/2gAIAQEABj8CltrapUwTFhPeB6CbWn//xAAbEAACAwADAAAAAAAAAAAAAAABEQAhMRBRgf/aAAgBAQABPyHGr9hu3QC9jUXoFwQTpAlPGlQn/9oADAMBAAIAAwAAABBEz//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8QP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8QP//EABwQAQEAAgIDAAAAAAAAAAAAAAERACExUUGBwf/aAAgBAQABPxAEIUGjywn/ADhGjhedga7wAslpU95G0cijujsVwxp4aiVfrn//2Q=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"插件名字\"\n        title=\"插件名字\"\n        src=\"https://cdn.jsdelivr.net/gh/leadream/juuun.io@gh-pages/static/9a4357d8cc125fa222e7809987f3307d/c08c5/plugin-name.jpg\"\n        srcset=\"https://cdn.jsdelivr.net/gh/leadream/juuun.io@gh-pages/static/9a4357d8cc125fa222e7809987f3307d/0913d/plugin-name.jpg 160w,\nhttps://cdn.jsdelivr.net/gh/leadream/juuun.io@gh-pages/static/9a4357d8cc125fa222e7809987f3307d/cb69c/plugin-name.jpg 320w,\nhttps://cdn.jsdelivr.net/gh/leadream/juuun.io@gh-pages/static/9a4357d8cc125fa222e7809987f3307d/c08c5/plugin-name.jpg 640w,\nhttps://cdn.jsdelivr.net/gh/leadream/juuun.io@gh-pages/static/9a4357d8cc125fa222e7809987f3307d/6a068/plugin-name.jpg 960w,\nhttps://cdn.jsdelivr.net/gh/leadream/juuun.io@gh-pages/static/9a4357d8cc125fa222e7809987f3307d/eea4a/plugin-name.jpg 1280w,\nhttps://cdn.jsdelivr.net/gh/leadream/juuun.io@gh-pages/static/9a4357d8cc125fa222e7809987f3307d/8e12e/plugin-name.jpg 1434w\"\n        sizes=\"(max-width: 640px) 100vw, 640px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>在这一步我们选择一个模板，因为我们的插件有界面，所以我们选择第三个模板。点击「Save as」按钮，把它存在本地一个文件夹中，这样第一阶段就算是完成了。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"https://cdn.jsdelivr.net/gh/leadream/juuun.io@gh-pages/static/462e9090a5cd6ac49898928f1daf2c56/8e12e/plugin-type.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 67.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAOABQDASIAAhEBAxEB/8QAGQAAAgMBAAAAAAAAAAAAAAAAAAIBAwQF/8QAFQEBAQAAAAAAAAAAAAAAAAAAAAH/2gAMAwEAAhADEAAAAeyuiErGK//EABkQAQACAwAAAAAAAAAAAAAAAAECEQADEP/aAAgBAQABBQJaHY3GV9M//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFREBAQAAAAAAAAAAAAAAAAAAAAH/2gAIAQIBAT8BV//EABkQAAIDAQAAAAAAAAAAAAAAAAARASAhMv/aAAgBAQAGPwJo5Jyn/8QAGhABAQEBAQEBAAAAAAAAAAAAAREAIUFRcf/aAAgBAQABPyFHCZ5cEBVnc/aIz90MnM6PPfu//9oADAMBAAIAAwAAABCb3//EABYRAQEBAAAAAAAAAAAAAAAAAAERAP/aAAgBAwEBPxBG24R3/8QAFxEAAwEAAAAAAAAAAAAAAAAAAAEhMf/aAAgBAgEBPxBR01h//8QAHRABAAMAAQUAAAAAAAAAAAAAAQARIUExUWGRwf/aAAgBAQABPxBxubLNlbUhtou/HEDW7DbQ7kySusHG+4lgFI5fJ//Z'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"选择插件类型\"\n        title=\"选择插件类型\"\n        src=\"https://cdn.jsdelivr.net/gh/leadream/juuun.io@gh-pages/static/462e9090a5cd6ac49898928f1daf2c56/c08c5/plugin-type.jpg\"\n        srcset=\"https://cdn.jsdelivr.net/gh/leadream/juuun.io@gh-pages/static/462e9090a5cd6ac49898928f1daf2c56/0913d/plugin-type.jpg 160w,\nhttps://cdn.jsdelivr.net/gh/leadream/juuun.io@gh-pages/static/462e9090a5cd6ac49898928f1daf2c56/cb69c/plugin-type.jpg 320w,\nhttps://cdn.jsdelivr.net/gh/leadream/juuun.io@gh-pages/static/462e9090a5cd6ac49898928f1daf2c56/c08c5/plugin-type.jpg 640w,\nhttps://cdn.jsdelivr.net/gh/leadream/juuun.io@gh-pages/static/462e9090a5cd6ac49898928f1daf2c56/6a068/plugin-type.jpg 960w,\nhttps://cdn.jsdelivr.net/gh/leadream/juuun.io@gh-pages/static/462e9090a5cd6ac49898928f1daf2c56/eea4a/plugin-type.jpg 1280w,\nhttps://cdn.jsdelivr.net/gh/leadream/juuun.io@gh-pages/static/462e9090a5cd6ac49898928f1daf2c56/8e12e/plugin-type.jpg 1434w\"\n        sizes=\"(max-width: 640px) 100vw, 640px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<h2>编写插件</h2>\n<p>现在我们开始进入正题——编写插件。首先打开你的 VSCode，选择文件，依次点击文件->打开，选择你刚才保存的插件文件夹。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"https://cdn.jsdelivr.net/gh/leadream/juuun.io@gh-pages/static/05c7827414d76d460685bd66277b2fa4/11438/start-writing.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 60.62500000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAMABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAMCBP/EABYBAQEBAAAAAAAAAAAAAAAAAAABAv/aAAwDAQACEAMQAAABlzajqEx//8QAGRAAAgMBAAAAAAAAAAAAAAAAAQIAAxES/9oACAEBAAEFAqdIsJ76aVuVDHWn/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAGRABAAIDAAAAAAAAAAAAAAAAAQAQITEy/9oACAEBAAY/Atxyzppa/8QAGxAAAwACAwAAAAAAAAAAAAAAAAERITFBUfH/2gAIAQEAAT8hdl1aJrW7s9gwCbLByxn/2gAMAwEAAgADAAAAEIjP/8QAFREBAQAAAAAAAAAAAAAAAAAAEBH/2gAIAQMBAT8Qh//EABURAQEAAAAAAAAAAAAAAAAAABAR/9oACAECAQE/EKf/xAAbEAEBAQACAwAAAAAAAAAAAAABEQAhMVFh8f/aAAgBAQABPxBMpUq1kPOiYDnLfR5kFFPN9ZJi0Zu2/9k='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"开始编写插件\"\n        title=\"开始编写插件\"\n        src=\"https://cdn.jsdelivr.net/gh/leadream/juuun.io@gh-pages/static/05c7827414d76d460685bd66277b2fa4/c08c5/start-writing.jpg\"\n        srcset=\"https://cdn.jsdelivr.net/gh/leadream/juuun.io@gh-pages/static/05c7827414d76d460685bd66277b2fa4/0913d/start-writing.jpg 160w,\nhttps://cdn.jsdelivr.net/gh/leadream/juuun.io@gh-pages/static/05c7827414d76d460685bd66277b2fa4/cb69c/start-writing.jpg 320w,\nhttps://cdn.jsdelivr.net/gh/leadream/juuun.io@gh-pages/static/05c7827414d76d460685bd66277b2fa4/c08c5/start-writing.jpg 640w,\nhttps://cdn.jsdelivr.net/gh/leadream/juuun.io@gh-pages/static/05c7827414d76d460685bd66277b2fa4/6a068/start-writing.jpg 960w,\nhttps://cdn.jsdelivr.net/gh/leadream/juuun.io@gh-pages/static/05c7827414d76d460685bd66277b2fa4/eea4a/start-writing.jpg 1280w,\nhttps://cdn.jsdelivr.net/gh/leadream/juuun.io@gh-pages/static/05c7827414d76d460685bd66277b2fa4/11438/start-writing.jpg 1322w\"\n        sizes=\"(max-width: 640px) 100vw, 640px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>我们主要编辑 <code>code.ts</code> 和 <code>ui.html</code> 这两个文件。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"https://cdn.jsdelivr.net/gh/leadream/juuun.io@gh-pages/static/e45b6428e518dd0e3c2bd692835ba34b/8ec0a/main-code.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 44.375%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAJABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAECBf/EABYBAQEBAAAAAAAAAAAAAAAAAAABAv/aAAwDAQACEAMQAAAB5aNSsj//xAAUEAEAAAAAAAAAAAAAAAAAAAAg/9oACAEBAAEFAl//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAUEAEAAAAAAAAAAAAAAAAAAAAg/9oACAEBAAY/Al//xAAXEAEAAwAAAAAAAAAAAAAAAAABACAh/9oACAEBAAE/ITWNf//aAAwDAQACAAMAAAAQ7N//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/ED//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/ED//xAAYEAEAAwEAAAAAAAAAAAAAAAABABARIf/aAAgBAQABPxCAY8ojX//Z'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"插件主代码\"\n        title=\"插件主代码\"\n        src=\"https://cdn.jsdelivr.net/gh/leadream/juuun.io@gh-pages/static/e45b6428e518dd0e3c2bd692835ba34b/c08c5/main-code.jpg\"\n        srcset=\"https://cdn.jsdelivr.net/gh/leadream/juuun.io@gh-pages/static/e45b6428e518dd0e3c2bd692835ba34b/0913d/main-code.jpg 160w,\nhttps://cdn.jsdelivr.net/gh/leadream/juuun.io@gh-pages/static/e45b6428e518dd0e3c2bd692835ba34b/cb69c/main-code.jpg 320w,\nhttps://cdn.jsdelivr.net/gh/leadream/juuun.io@gh-pages/static/e45b6428e518dd0e3c2bd692835ba34b/c08c5/main-code.jpg 640w,\nhttps://cdn.jsdelivr.net/gh/leadream/juuun.io@gh-pages/static/e45b6428e518dd0e3c2bd692835ba34b/6a068/main-code.jpg 960w,\nhttps://cdn.jsdelivr.net/gh/leadream/juuun.io@gh-pages/static/e45b6428e518dd0e3c2bd692835ba34b/eea4a/main-code.jpg 1280w,\nhttps://cdn.jsdelivr.net/gh/leadream/juuun.io@gh-pages/static/e45b6428e518dd0e3c2bd692835ba34b/8ec0a/main-code.jpg 2560w\"\n        sizes=\"(max-width: 640px) 100vw, 640px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>前面提到了，我们的代码需要被转换。按下 <code>Cmd Shift B</code>，会弹出两个选项，我们选择第一个「tsc:监视」，他可以在我们编写代码时转换代码。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"https://cdn.jsdelivr.net/gh/leadream/juuun.io@gh-pages/static/a4f5e7e76c05d3f888a9b982fbbac8d5/572c8/listen-file-change.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 21.875%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAEABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAEF/8QAFgEBAQEAAAAAAAAAAAAAAAAAAAEC/9oADAMBAAIQAxAAAAHNhqAf/8QAFBABAAAAAAAAAAAAAAAAAAAAEP/aAAgBAQABBQJ//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAFBABAAAAAAAAAAAAAAAAAAAAEP/aAAgBAQAGPwJ//8QAFBABAAAAAAAAAAAAAAAAAAAAEP/aAAgBAQABPyF//9oADAMBAAIAAwAAABB33//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8QP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8QP//EABkQAAMAAwAAAAAAAAAAAAAAAAABIUFhkf/aAAgBAQABPxDU4Mdwj//Z'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"监听文件变化\"\n        title=\"监听文件变化\"\n        src=\"https://cdn.jsdelivr.net/gh/leadream/juuun.io@gh-pages/static/a4f5e7e76c05d3f888a9b982fbbac8d5/c08c5/listen-file-change.jpg\"\n        srcset=\"https://cdn.jsdelivr.net/gh/leadream/juuun.io@gh-pages/static/a4f5e7e76c05d3f888a9b982fbbac8d5/0913d/listen-file-change.jpg 160w,\nhttps://cdn.jsdelivr.net/gh/leadream/juuun.io@gh-pages/static/a4f5e7e76c05d3f888a9b982fbbac8d5/cb69c/listen-file-change.jpg 320w,\nhttps://cdn.jsdelivr.net/gh/leadream/juuun.io@gh-pages/static/a4f5e7e76c05d3f888a9b982fbbac8d5/c08c5/listen-file-change.jpg 640w,\nhttps://cdn.jsdelivr.net/gh/leadream/juuun.io@gh-pages/static/a4f5e7e76c05d3f888a9b982fbbac8d5/6a068/listen-file-change.jpg 960w,\nhttps://cdn.jsdelivr.net/gh/leadream/juuun.io@gh-pages/static/a4f5e7e76c05d3f888a9b982fbbac8d5/572c8/listen-file-change.jpg 1276w\"\n        sizes=\"(max-width: 640px) 100vw, 640px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>为了方便后面的讲述，我们先了解一下插件的运行原理。插件主要有两部分组成，一个是负责界面的，就是说你的插件需要一些界面和用户进行交互，这一部分不是必须的，因为有些插件不需要和用户交付。还有一部分是负责处理事务的，比如说在画布中画一个矩形。它们之间是通过传送消息来互相通信的。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"https://cdn.jsdelivr.net/gh/leadream/juuun.io@gh-pages/static/f1cf27ff6d94fdaa7d318dafe0ba0780/af5f6/basic.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 51.87500000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAKABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAME/8QAFAEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEAMQAAAB0bKiag//xAAYEAEBAQEBAAAAAAAAAAAAAAABAgMREP/aAAgBAQABBQK9KNKUIenPf//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABcQAQADAAAAAAAAAAAAAAAAAAEQICH/2gAIAQEABj8CQY2n/8QAGxAAAgEFAAAAAAAAAAAAAAAAAREAECExUeH/2gAIAQEAAT8hNATlsDsI3KJoV//aAAwDAQACAAMAAAAQu8//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/ED//xAAVEQEBAAAAAAAAAAAAAAAAAAAQEf/aAAgBAgEBPxCn/8QAGRABAQEBAQEAAAAAAAAAAAAAAREAITFx/9oACAEBAAE/EA4zPE5iiw9hTAtCui2avVn5oPpdA8N//9k='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"插件基本原理\"\n        title=\"插件基本原理\"\n        src=\"https://cdn.jsdelivr.net/gh/leadream/juuun.io@gh-pages/static/f1cf27ff6d94fdaa7d318dafe0ba0780/c08c5/basic.jpg\"\n        srcset=\"https://cdn.jsdelivr.net/gh/leadream/juuun.io@gh-pages/static/f1cf27ff6d94fdaa7d318dafe0ba0780/0913d/basic.jpg 160w,\nhttps://cdn.jsdelivr.net/gh/leadream/juuun.io@gh-pages/static/f1cf27ff6d94fdaa7d318dafe0ba0780/cb69c/basic.jpg 320w,\nhttps://cdn.jsdelivr.net/gh/leadream/juuun.io@gh-pages/static/f1cf27ff6d94fdaa7d318dafe0ba0780/c08c5/basic.jpg 640w,\nhttps://cdn.jsdelivr.net/gh/leadream/juuun.io@gh-pages/static/f1cf27ff6d94fdaa7d318dafe0ba0780/6a068/basic.jpg 960w,\nhttps://cdn.jsdelivr.net/gh/leadream/juuun.io@gh-pages/static/f1cf27ff6d94fdaa7d318dafe0ba0780/af5f6/basic.jpg 1166w\"\n        sizes=\"(max-width: 640px) 100vw, 640px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>我们的插件是需要和用户交互的，所以我们需要先画一个界面。这个交互界面的代码在 <code>ui.html</code> 中，就是很常见的 HTML 代码。</p>\n<pre><code class=\"language-html\">&#x3C;style>\n  body{\n    font-family: -apple-system,BlinkMacSystemFont,Segoe UI,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol;\n  }\n&#x3C;/style>\n&#x3C;h3>Figma style cursor Creator&#x3C;/h3>\n&#x3C;p>\n  &#x3C;input id=\"name\" placeholder=\"your name\">\n  &#x3C;input id=\"color\" placeholder=\"your color\" type=\"color\">\n&#x3C;/p>\n&#x3C;button id=\"create\">Create&#x3C;/button>\n&#x3C;button id=\"cancel\">Cancel&#x3C;/button>\n</code></pre>\n<p>它画出来的截面大概长这个样子：</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"https://cdn.jsdelivr.net/gh/leadream/juuun.io@gh-pages/static/5849ed7dd9bbd5a17b0a60475de072f7/bf093/plugin-interface.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 65.625%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAECBf/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAdqkyAD/xAAYEAADAQEAAAAAAAAAAAAAAAAAEBEBEv/aAAgBAQABBQIxWHS//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAFhAAAwAAAAAAAAAAAAAAAAAAACAx/9oACAEBAAY/AiL/AP/EABoQAAICAwAAAAAAAAAAAAAAAAABEHERMYH/2gAIAQEAAT8hSroje8IQUj//2gAMAwEAAgADAAAAEIPP/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPxA//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPxA//8QAGxABAAMBAAMAAAAAAAAAAAAAAQARITFhcfH/2gAIAQEAAT8QRMTHKgKUmvk2PX3KyVdy/wBR1uf/2Q=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"插件界面\"\n        title=\"插件界面\"\n        src=\"https://cdn.jsdelivr.net/gh/leadream/juuun.io@gh-pages/static/5849ed7dd9bbd5a17b0a60475de072f7/c08c5/plugin-interface.jpg\"\n        srcset=\"https://cdn.jsdelivr.net/gh/leadream/juuun.io@gh-pages/static/5849ed7dd9bbd5a17b0a60475de072f7/0913d/plugin-interface.jpg 160w,\nhttps://cdn.jsdelivr.net/gh/leadream/juuun.io@gh-pages/static/5849ed7dd9bbd5a17b0a60475de072f7/cb69c/plugin-interface.jpg 320w,\nhttps://cdn.jsdelivr.net/gh/leadream/juuun.io@gh-pages/static/5849ed7dd9bbd5a17b0a60475de072f7/c08c5/plugin-interface.jpg 640w,\nhttps://cdn.jsdelivr.net/gh/leadream/juuun.io@gh-pages/static/5849ed7dd9bbd5a17b0a60475de072f7/bf093/plugin-interface.jpg 888w\"\n        sizes=\"(max-width: 640px) 100vw, 640px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>一个可以输入名字的输入框，一个颜色选择，两个按钮。有人说很丑，但是我们先不管这么多，又不是不能用。</p>\n<p>界面画完了，但是这个绘制光标的事情需要再画布中完成，也就是说需要主进程来完成这个事情。所以我们需要获取到用户输入的名字和颜色，并将这两个值传给主进程。</p>\n<p>我们在刚才的代码后面加上这一段代码，它的作用就是在用户点击按钮时将名字和颜色传给主进程。</p>\n<pre><code class=\"language-html\">&#x3C;script>\n  const nameInput = document.getElementById('name')\n  const colorInput = document.getElementById('color')\n  const createButton = document.getElementById('create')\n  createButton.onclick = () => {\n    // 点击按钮时将填写的名字和颜色发送过去\n    parent.postMessage({ pluginMessage: { type: 'create-cursor', name: nameInput.value, color: colorInput.value } }, '*')\n  }\n  document.getElementById('cancel').onclick = () => {\n    // 点击取消按钮时关闭插件\n    parent.postMessage({ pluginMessage: { type: 'cancel' } }, '*')\n  }\n&#x3C;/script>\n</code></pre>\n<p>接下来我们一起来写主进程也就是 <code>code.ts</code> 的代码。它的主要工作就是接收到消息后，在界面上绘制元素，基本结构如下：</p>\n<pre><code class=\"language-ts\">// 整一个界面儿\nfigma.showUI(__html__)\n\nfigma.ui.onmessage = msg => {\n  if (msg.type === 'create-cursor') {\n    // 收到信号就开始比划\n    // blablabla\n  } else if (msg.type === 'cancel') {\n    // 收到信号说要取消，关了\n    figma.closePlugin()\n  }\n};\n</code></pre>\n<p>要绘制的元素有三个：一个名字，一个矩形底框和一个光标。</p>\n<p>来跟我左边画一个名儿。名字就是一个文本图层，我们可以使用 <code>createText</code> 方法来创建，不过需要注意的是在绘制文本之前一定要先通过 <code>loadFontAsync</code> 加载好字体。</p>\n<pre><code class=\"language-js\">// 来左边跟我一起画个名儿\nconst createName = async (nodes, name) => {\n  // 画之前先要把字体加载好\n  await figma.loadFontAsync({ family: \"Roboto\", style: \"Regular\" })\n  const text = figma.createText()\n  text.x = 24\n  text.y = 21\n  text.characters = name\n  text.fills = [{type: 'SOLID', color: {r: 1, g: 1, b: 1}}]\n  // 将文字添加到当前页面\n  figma.currentPage.appendChild(text)\n  nodes.push(text)\n  return text\n}\n</code></pre>\n<p>接着咱们在右边画一个矩形，画矩形使用的是 <code>createRectangle</code> 方法。</p>\n<pre><code class=\"language-js\">// 在你右边画一个矩形\nconst createRect = (nodes, rgb) => {\n  const rect = figma.createRectangle()\n  rect.x = 17\n  rect.y = 17\n  rect.fills = [{type: 'SOLID', color: rgb}]\n  figma.currentPage.appendChild(rect)\n  nodes.push(rect)\n  return rect\n}\n</code></pre>\n<p>最后别忘了还需要画一个光标。光标就是一个 SVG 图像，只是要给它添加一个自定义底色，所以我们把它写成一个函数，通过参数把颜色传进去，这样调用这个函数就能得到一个自定义颜色的 SVG 字符串。</p>\n<pre><code class=\"language-js\">// 画一个光标\nconst cursorCode = color => `\n  &#x3C;svg width=\"22\" height=\"24\" viewBox=\"0 0 22 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n    &#x3C;g filter=\"url(#filter0_d)\">\n      &#x3C;path d=\"M7.5 17L5 4L16 10.5L10.5 12L7.5 17Z\" fill=\"${color}\"/>\n      &#x3C;path d=\"M6.99999 17.1L7.25999 18.38L7.92999 17.26L10.83 12.43L16.13 10.98L17.27 10.68L16.25 10.07L5.24999 3.57001L4.29999 3.01001L4.49999 4.09001L6.99999 17.09V17.1Z\" stroke=\"white\" stroke-linecap=\"square\"/>\n    &#x3C;/g>\n    &#x3C;defs>\n      &#x3C;filter id=\"filter0_d\" x=\"0.608521\" y=\"0.0220032\" width=\"20.9383\" height=\"23.7218\" filterUnits=\"userSpaceOnUse\" color-interpolation-filters=\"sRGB\">\n        &#x3C;feFlood flood-opacity=\"0\" result=\"BackgroundImageFix\"/>\n        &#x3C;feColorMatrix in=\"SourceAlpha\" type=\"matrix\" values=\"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0\"/>\n        &#x3C;feOffset dy=\"1\"/>\n        &#x3C;feGaussianBlur stdDeviation=\"1.5\"/>\n        &#x3C;feColorMatrix type=\"matrix\" values=\"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.35 0\"/>\n        &#x3C;feBlend mode=\"normal\" in2=\"BackgroundImageFix\" result=\"effect1_dropShadow\"/>\n        &#x3C;feBlend mode=\"normal\" in=\"SourceGraphic\" in2=\"effect1_dropShadow\" result=\"shape\"/>\n      &#x3C;/filter>\n    &#x3C;/defs>\n  &#x3C;/svg>\n`\n</code></pre>\n<p>上面的函数只会生成一段 SVG 代码，我们还需要通过 <code>createNodeFromSvg</code> 方法把它画到画布之中。</p>\n<pre><code class=\"language-js\">// 在中间比划一个光标\nconst createSVG = (nodes, color) => {\n  const cursor = figma.createNodeFromSvg(cursorCode(color))\n  cursor.x = 0\n  cursor.y = 0\n  figma.currentPage.appendChild(cursor)\n  nodes.push(cursor)\n  return cursor\n}\n</code></pre>\n<p>这样，我们就准备好了所有绘制图形和文本的函数。现在我们需要逐个执行这些函数，来完成绘制工作。</p>\n<p>绘制矩形时需要的颜色时 RGB 值，但是我们从用户输入那里获得的是 HEX 色值，所以需要一个转换函数来帮助我们转换一下。</p>\n<pre><code class=\"language-ts\">// 齐活儿，开始整吧\nconst main = async msg => {\n  const nodes: SceneNode[] = []\n  // 将接收到的颜色转化为 RGB 格式\n  const rgb = {r: hexToR(msg.color), g: hexToG(msg.color), b: hexToB(msg.color)}\n  const name = msg.name\n  // 画光标\n  createSVG(nodes, msg.color)\n  // 画矩形\n  const rect = createRect(nodes, rgb)\n  // 画名儿\n  const text = await createName(nodes, name)\n  // 根据名儿的宽度调整矩形宽度\n  rect.resize(text.width + 14, 22)\n  // 打包到一起\n  figma.group(nodes, figma.currentPage)\n  // 选中它们\n  figma.currentPage.selection = nodes\n  // 将视图滚动到它们的位置\n  figma.viewport.scrollAndZoomIntoView(nodes)\n}\n</code></pre>\n<p>最后，我们修改一下最前面的基本结构代码。</p>\n<pre><code class=\"language-js\">// 整一个界面儿\nfigma.showUI(__html__)\n\nfigma.ui.onmessage = msg => {\n  if (msg.type === 'create-cursor') {\n    // 收到信号就开始比划\n    main(msg)\n      .then(() => {\n        // 画完了，关了\n        figma.closePlugin()\n      })\n  } else if (msg.type === 'cancel') {\n    // 收到信号说要取消，关了\n    figma.closePlugin()\n  }\n};\n</code></pre>\n<p>这样，我们就完成了整个插件的编写。</p>\n<h2>运行插件</h2>\n<p>想要运行插件很简单，我们在画布中右击，选择 Plugin->Development->你的插件名就可以了。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"https://cdn.jsdelivr.net/gh/leadream/juuun.io@gh-pages/static/144ed061091895545e0102058a1f9651/7e7db/run.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 70%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAOABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAQFA//EABQBAQAAAAAAAAAAAAAAAAAAAAH/2gAMAwEAAhADEAAAAWU7MRLxgD//xAAbEAACAgMBAAAAAAAAAAAAAAABAgADBBEUM//aAAgBAQABBQK6kmYPrGG15XEoUpV//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAHBAAAwABBQAAAAAAAAAAAAAAAAECYRATITFx/9oACAEBAAY/AqrcpYK80awcUhKuz//EABsQAQACAwEBAAAAAAAAAAAAAAEAESExYRDw/9oACAEBAAE/Icbilo41Pj7525EF3CwQi9T/2gAMAwEAAgADAAAAEPMP/8QAFxEBAAMAAAAAAAAAAAAAAAAAARARIf/aAAgBAwEBPxCwyP/EABYRAQEBAAAAAAAAAAAAAAAAAAEQEf/aAAgBAgEBPxDFn//EABwQAQADAAIDAAAAAAAAAAAAAAEAITEQYXGx0f/aAAgBAQABPxBMbiTGN6nnU9OGFQSF7Javad+RrSJcWs//2Q=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"运行插件\"\n        title=\"运行插件\"\n        src=\"https://cdn.jsdelivr.net/gh/leadream/juuun.io@gh-pages/static/144ed061091895545e0102058a1f9651/c08c5/run.jpg\"\n        srcset=\"https://cdn.jsdelivr.net/gh/leadream/juuun.io@gh-pages/static/144ed061091895545e0102058a1f9651/0913d/run.jpg 160w,\nhttps://cdn.jsdelivr.net/gh/leadream/juuun.io@gh-pages/static/144ed061091895545e0102058a1f9651/cb69c/run.jpg 320w,\nhttps://cdn.jsdelivr.net/gh/leadream/juuun.io@gh-pages/static/144ed061091895545e0102058a1f9651/c08c5/run.jpg 640w,\nhttps://cdn.jsdelivr.net/gh/leadream/juuun.io@gh-pages/static/144ed061091895545e0102058a1f9651/6a068/run.jpg 960w,\nhttps://cdn.jsdelivr.net/gh/leadream/juuun.io@gh-pages/static/144ed061091895545e0102058a1f9651/eea4a/run.jpg 1280w,\nhttps://cdn.jsdelivr.net/gh/leadream/juuun.io@gh-pages/static/144ed061091895545e0102058a1f9651/7e7db/run.jpg 1474w\"\n        sizes=\"(max-width: 640px) 100vw, 640px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>为了方便调试插件，你可以在通过上面方式调出过插件一次之后，按下快捷键 <code>Cmd Option P</code> 来再次调用插件。如果你想直接体验这个插件，可以直接去<a href=\"https://github.com/leadream/figma-plugin-cursor-creator\" target=\"_blank\" rel=\"noopener noreferrer\">这里</a>下载插件代码，并在创建插件之后选择从已有代码中选择 <code>manifest.json</code> 文件来使用。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"https://cdn.jsdelivr.net/gh/leadream/juuun.io@gh-pages/static/f52b178920eaf5da0a8e8d7dca7988c8/f43b1/install.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 66.875%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAABQAG/8QAFAEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEAMQAAABeDdzIXUf/8QAGhAAAgMBAQAAAAAAAAAAAAAAAgMAAQQFIf/aAAgBAQABBQKagWbjWa7nS80GwmX/AP/EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABwQAAICAgMAAAAAAAAAAAAAAAERAAIQEiEjcv/aAAgBAQAGPwKdtkdeFFYI4r5jsWZ//8QAHBAAAwACAwEAAAAAAAAAAAAAAAERITFBUWGx/9oACAEBAAE/IZ1s4mWG3l+Fj4WDVGpWIn1l79FP/9oADAMBAAIAAwAAABBAD//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8QP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8QP//EABwQAQACAgMBAAAAAAAAAAAAAAERIQAxQVFxwf/aAAgBAQABPxAArBwBIcKhtN2uOt4IWrEa18cAQ66xnMkEcRgEGiwCpnj1z//Z'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"安装已有插件\"\n        title=\"安装已有插件\"\n        src=\"https://cdn.jsdelivr.net/gh/leadream/juuun.io@gh-pages/static/f52b178920eaf5da0a8e8d7dca7988c8/c08c5/install.jpg\"\n        srcset=\"https://cdn.jsdelivr.net/gh/leadream/juuun.io@gh-pages/static/f52b178920eaf5da0a8e8d7dca7988c8/0913d/install.jpg 160w,\nhttps://cdn.jsdelivr.net/gh/leadream/juuun.io@gh-pages/static/f52b178920eaf5da0a8e8d7dca7988c8/cb69c/install.jpg 320w,\nhttps://cdn.jsdelivr.net/gh/leadream/juuun.io@gh-pages/static/f52b178920eaf5da0a8e8d7dca7988c8/c08c5/install.jpg 640w,\nhttps://cdn.jsdelivr.net/gh/leadream/juuun.io@gh-pages/static/f52b178920eaf5da0a8e8d7dca7988c8/6a068/install.jpg 960w,\nhttps://cdn.jsdelivr.net/gh/leadream/juuun.io@gh-pages/static/f52b178920eaf5da0a8e8d7dca7988c8/eea4a/install.jpg 1280w,\nhttps://cdn.jsdelivr.net/gh/leadream/juuun.io@gh-pages/static/f52b178920eaf5da0a8e8d7dca7988c8/f43b1/install.jpg 1426w\"\n        sizes=\"(max-width: 640px) 100vw, 640px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>最后，我们下期见。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"https://cdn.jsdelivr.net/gh/leadream/juuun.io@gh-pages/static/e4f4350d53fa26172bef3453953d36fe/15ffe/byebye.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 60%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAMABQDASIAAhEBAxEB/8QAGQAAAgMBAAAAAAAAAAAAAAAAAAMBAgQF/8QAFQEBAQAAAAAAAAAAAAAAAAAAAgP/2gAMAwEAAhADEAAAAeqnRQ0YSKf/xAAZEAACAwEAAAAAAAAAAAAAAAABAgAQExL/2gAIAQEAAQUCZuZutEAzNK//xAAXEQEAAwAAAAAAAAAAAAAAAAACARBC/9oACAEDAQE/ATI1X//EABcRAAMBAAAAAAAAAAAAAAAAAAEQEUH/2gAIAQIBAT8BNxf/xAAbEAABBAMAAAAAAAAAAAAAAAABABARITEyQf/aAAgBAQAGPwKThdaxK1Df/8QAHBABAAEEAwAAAAAAAAAAAAAAAQAQESGRMWHx/9oACAEBAAE/IdcY5vES6awyQWwDueHT/9oADAMBAAIAAwAAABBzD//EABgRAQADAQAAAAAAAAAAAAAAAAEQESFh/9oACAEDAQE/EAGG+R//xAAXEQADAQAAAAAAAAAAAAAAAAABEBEh/9oACAECAQE/EAvS/8QAHBABAQEAAQUAAAAAAAAAAAAAAREAMSFxwdHx/9oACAEBAAE/EIQKkAOTxpojs95QThLuscLBTfO4AIcb/9k='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"再见啦！\"\n        title=\"再见啦！\"\n        src=\"https://cdn.jsdelivr.net/gh/leadream/juuun.io@gh-pages/static/e4f4350d53fa26172bef3453953d36fe/c08c5/byebye.jpg\"\n        srcset=\"https://cdn.jsdelivr.net/gh/leadream/juuun.io@gh-pages/static/e4f4350d53fa26172bef3453953d36fe/0913d/byebye.jpg 160w,\nhttps://cdn.jsdelivr.net/gh/leadream/juuun.io@gh-pages/static/e4f4350d53fa26172bef3453953d36fe/cb69c/byebye.jpg 320w,\nhttps://cdn.jsdelivr.net/gh/leadream/juuun.io@gh-pages/static/e4f4350d53fa26172bef3453953d36fe/c08c5/byebye.jpg 640w,\nhttps://cdn.jsdelivr.net/gh/leadream/juuun.io@gh-pages/static/e4f4350d53fa26172bef3453953d36fe/6a068/byebye.jpg 960w,\nhttps://cdn.jsdelivr.net/gh/leadream/juuun.io@gh-pages/static/e4f4350d53fa26172bef3453953d36fe/eea4a/byebye.jpg 1280w,\nhttps://cdn.jsdelivr.net/gh/leadream/juuun.io@gh-pages/static/e4f4350d53fa26172bef3453953d36fe/15ffe/byebye.jpg 1546w\"\n        sizes=\"(max-width: 640px) 100vw, 640px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>","frontmatter":{"title":"怎样写一个有趣但无用的 Figma 插件？","date":"2019/11/25","description":"也可能无趣。","color":null,"cover":null,"demo":null,"demoText":null}}},"pageContext":{"slug":"/tutorial/how-to-make-a-boring-figma-plugin/","previous":{"fields":{"slug":"/tools/figma-icon-automation/"},"frontmatter":{"title":"一种不用离开座位的图标交付方式"}},"next":{"fields":{"slug":"/projects/figma-handoff/"},"frontmatter":{"title":"为了让更多人用上 Figma，我做了一个设计交付工具"}}}},"staticQueryHashes":["63159454"]}